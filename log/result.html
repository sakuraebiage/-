<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>星守戦線 - 結果ログ</title>
<style>
body {
  margin:0;
  font-family:"Consolas","Roboto Mono",monospace;
  background:#000;
  color:#e0e0e0;
}
.main-header { position:sticky; top:0; z-index:999; background:#111; border-bottom:1px solid #444; padding:8px 0; text-align:center; }
.main-header h1 { font-size:1.3em; color:#8ae1ff; margin:0 0 6px 0; }
.main-nav { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; }
.main-nav a { color:#8ae1ff; text-decoration:none; font-weight:bold; padding:6px 10px; border-radius:6px; transition:0.3s; }
.main-nav a:hover { color:#fff; background:rgba(138,225,255,0.2); text-shadow:0 0 5px #00eaff; }

#tabs { display:flex; justify-content:center; gap:10px; margin:10px 0; }
.tab { cursor:pointer; padding:6px 12px; border-radius:6px; background:#111; border:1px solid #8ae1ff; }
.tab.active { background:#8ae1ff; color:#000; }

#log-container { padding:10px 20px; max-width:900px; margin:auto; }
.log-entry { border-bottom:1px solid #333; padding:6px 0; font-size:0.9em; }

</style>
</head>
<body>

<!-- 共通ヘッダー読み込み -->
<div id="header-container"></div>

<div id="tabs">
  <div class="tab active" data-type="combat">戦闘</div>
  <div class="tab" data-type="explore">探索</div>
  <div class="tab" data-type="rescue">救助</div>
  <div class="tab" data-type="craft">クラフト</div>
</div>

<div id="log-container">
  <p>ログを読み込み中...</p>
</div>

<script src="../common/header-loader.js"></script>
<script>
// タブ切り替え
const tabs = document.querySelectorAll(".tab");
const logContainer = document.getElementById("log-container");
let currentType = "combat";

tabs.forEach(tab=>{
  tab.addEventListener("click", ()=>{
    tabs.forEach(t=>t.classList.remove("active"));
    tab.classList.add("active");
    currentType = tab.dataset.type;
    renderLogs();
  });
});

// ログ表示
function renderLogs(){
  const logs = JSON.parse(localStorage.getItem(`${currentType}_logs`)) || [];
  if(logs.length===0){
    logContainer.innerHTML = `<p>${currentType}ログはまだありません。</p>`;
    return;
  }
  logContainer.innerHTML = "";
  logs.forEach(entry=>{
    const div = document.createElement("div");
    div.classList.add("log-entry");
    div.textContent = `[${entry.time}] ${entry.text}`;
    logContainer.appendChild(div);
  });
}

// サンプルログ追加（初回確認用）
function addSampleLogs(){
  if(!localStorage.getItem("combat_logs")){
    const now = new Date().toLocaleTimeString();
    localStorage.setItem("combat_logs", JSON.stringify([{time:now,text:"拠点1で戦闘行動"}]));
  }
  if(!localStorage.getItem("explore_logs")){
    const now = new Date().toLocaleTimeString();
    localStorage.setItem("explore_logs", JSON.stringify([{time:now,text:"拠点2で探索成功"}]));
  }
  if(!localStorage.getItem("rescue_logs")){
    const now = new Date().toLocaleTimeString();
    localStorage.setItem("rescue_logs", JSON.stringify([{time:now,text:"拠点3で救助完了"}]));
  }
  if(!localStorage.getItem("craft_logs")){
    const now = new Date().toLocaleTimeString();
    localStorage.setItem("craft_logs", JSON.stringify([{time:now,text:"新装備作成成功"}]));
  }
}

addSampleLogs();
renderLogs();
</script>

</body>
</html>
