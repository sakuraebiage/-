<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>RPãƒãƒ£ãƒƒãƒˆ</title>
<style>
body { font-family: sans-serif; margin: 0; padding: 0; display: flex; height: 100vh; }
#areas { width: 30%; background: #eceff1; padding: 10px; overflow-y: auto; }
#chat { width: 70%; display: flex; flex-direction: column; }
#messages { flex: 1; overflow-y: auto; padding: 10px; border-bottom: 1px solid #ccc; }
#input { display: flex; }
#input input { flex: 1; padding: 5px; }
#input button { padding: 5px; }
.area { padding: 5px; background: #b0bec5; margin-bottom: 5px; cursor: pointer; }
.area.active { background: #90a4ae; font-weight: bold; }
.face { width: 20px; height: 20px; border-radius: 50%; display: inline-block; background: #ffeb3b; margin-right: 5px; vertical-align: middle; }
button#back { margin-bottom: 10px; padding: 5px; }
</style>
</head>
<body>
<div id="areas">
  <button id="back" onclick="goBack()">é˜²è¡›ç”»é¢ã«æˆ»ã‚‹</button>
  <h3>ã‚¨ãƒªã‚¢ä¸€è¦§</h3>
  <div id="areaList"></div>
  <input id="newArea" placeholder="æ–°ã—ã„ã‚¨ãƒªã‚¢å">
  <button onclick="addArea()">è¿½åŠ </button>
</div>
<div id="chat">
  <div id="messages"></div>
  <div id="input">
    <input id="msgInput" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›">
    <button onclick="sendMessage()">é€ä¿¡</button>
  </div>
</div>
  
  <header>
  <h1>é˜²è¡›æˆ¦æ³ãƒ¢ãƒ‹ã‚¿</h1>
 <nav>
    <a href="index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
    <a href="craft/craft.html">âš’ï¸ ã‚¯ãƒ©ãƒ•ãƒˆ</a>
    <a href="items/items.html">ğŸ’ ã‚¢ã‚¤ãƒ†ãƒ </a>
    <a href="chat/chat.html">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ</a>
    <a href="mypage.html">ğŸ’ªã€€è¨“ç·´</a>
    <a href="battle_setup.html">âš” æˆ¦é—˜è¨­å®š</a>
  ã€€<a href="shop.html">ğŸª è³¼è²·</a>
  ã€€<a href="craft.html">âš’ ã‚¯ãƒ©ãƒ•ãƒˆ</a>
  ã€€<a href="mypage.html">ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
    <a href="logout.html">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
  </nav>
</header>

<script>
// åˆæœŸã‚¨ãƒªã‚¢
let areas = [];
for(let i=0;i<20;i++){
  areas.push({name:'æ‹ ç‚¹'+(i+1), messages: []});
}

let currentArea = 0;

// URLã‹ã‚‰ã‚¨ãƒªã‚¢æŒ‡å®š
const params = new URLSearchParams(window.location.search);
const areaParam = params.get('area');
if(areaParam){
  const idx = areas.findIndex(a => a.name === areaParam);
  if(idx>=0) currentArea = idx;
}

function renderAreas(){
  const list = document.getElementById('areaList');
  list.innerHTML = '';
  areas.forEach((a,i)=>{
    const div = document.createElement('div');
    div.className = 'area'+(i===currentArea?' active':'');
    div.textContent = a.name;
    div.onclick = ()=>{
      currentArea=i;
      renderAreas();
      renderMessages();
    };
    list.appendChild(div);
  });
}

function renderMessages(){
  const msgDiv = document.getElementById('messages');
  msgDiv.innerHTML = '';
  areas[currentArea].messages.forEach(m=>{
    const p = document.createElement('p');
    p.innerHTML = `<span class="face"></span><b>${m.user}:</b> ${m.text}`;
    msgDiv.appendChild(p);
  });
}

function addArea(){
  const name = document.getElementById('newArea').value;
  if(name){
    areas.push({name:name, messages:[]});
    document.getElementById('newArea').value='';
    renderAreas();
  }
}

function sendMessage(){
  const text = document.getElementById('msgInput').value;
  if(text){
    areas[currentArea].messages.push({user:'è‡ªåˆ†', text:text});
    renderMessages();
    document.getElementById('msgInput').value='';
  }
}

function goBack(){
  window.location.href = 'index.html';
}

// åˆæœŸè¡¨ç¤º
renderAreas();
renderMessages();
</script>
</body>
</html>
