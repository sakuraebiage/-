<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æˆ¦é—˜è¨­å®š - æ˜Ÿå®ˆæˆ¦ç·š</title>
<style>
body {
  font-family: "Consolas", "Roboto Mono", monospace;
  background: #000;
  color: #e0e0e0;
  margin: 0;
  padding: 20px;
}
h1 { color: #8ae1ff; }
input, select, button {
  background: #111;
  color: #fff;
  border: 1px solid #555;
  padding: 5px;
  margin: 4px;
  border-radius: 5px;
}
button:hover { background: #333; cursor: pointer; }

#skill-list {
  border: 1px solid #444;
  padding: 10px;
  max-height: 300px;
  overflow-y: auto;
  margin-top: 10px;
}
.skill-item {
  display: flex;
  justify-content: space-between;
  border-bottom: 1px solid #333;
  padding: 5px;
}
.skill-item span {
  flex: 1;
}
#selected-skills {
  margin-top: 15px;
  border: 1px solid #555;
  padding: 10px;
}
.slot {
  border: 1px solid #333;
  padding: 5px;
  margin: 5px 0;
}
.favorite {
  color: gold;
  cursor: pointer;
  margin-left: 6px;
}
</style>
</head>
  <nav>
  <a href="../index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
  <a href="../defense/defense.html">ğŸ›¡ï¸ é˜²è¡›</a>
  <a href="../craft/craft.html">âš’ï¸ ã‚¯ãƒ©ãƒ•ãƒˆ</a>
  <a href="../items/items.html">ğŸ’ ã‚¢ã‚¤ãƒ†ãƒ </a>
  <a href="../chat/chat.html">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ</a>
  <a href="../mypage.html">ğŸ’ª è¨“ç·´</a>
  <a href="../battle_setup.html">âš” æˆ¦é—˜è¨­å®š</a>
  <a href="../shop.html">ğŸª è³¼è²·</a>
  <a href="../logout.html">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
</nav>

<body>
<h1>âš” æˆ¦é—˜è¨­å®š</h1>

<h2>ã‚¹ã‚­ãƒ«è¨­å®š</h2>

<label>ã‚«ãƒ†ã‚´ãƒª:
<select id="category">
  <option value="all">ã™ã¹ã¦</option>
  <option value="physical">ç‰©ç†</option>
  <option value="magic">é­”æ³•</option>
  <option value="heal">å›å¾©</option>
  <option value="support">è£œåŠ©</option>
  <option value="special">ç‰¹æ®Š</option>
</select>
</label>

<input type="text" id="search" placeholder="ã‚¹ã‚­ãƒ«åã‚’æ¤œç´¢...">
<button onclick="filterSkills()">æ¤œç´¢</button>

<div id="skill-list"></div>

<h3>é¸æŠä¸­ã®ã‚¹ã‚­ãƒ«æ ï¼ˆæœ€å¤§16ï¼‰</h3>
<div id="selected-skills"></div>

<script>
// ä»®ã‚¹ã‚­ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚ã¨ã§600å€‹ã«æ‹¡å¼µå¯èƒ½ï¼‰
const skills = [
  { name: "ã‚¹ãƒ©ãƒƒã‚·ãƒ¥", category: "physical", desc: "ç‰©ç†æ”»æ’ƒï¼ˆå˜ä½“ï¼‰å¨åŠ›120" },
  { name: "ãƒ€ãƒ–ãƒ«ã‚¹ãƒ©ãƒƒã‚·ãƒ¥", category: "physical", desc: "2é€£ç‰©ç†æ”»æ’ƒï¼ˆå˜ä½“ï¼‰å¨åŠ›150" },
  { name: "ãƒ•ã‚¡ã‚¤ã‚¢", category: "magic", desc: "ç«å±æ€§é­”æ³•ï¼ˆå˜ä½“ï¼‰å¨åŠ›130" },
  { name: "ãƒ’ãƒ¼ãƒ«", category: "heal", desc: "å‘³æ–¹å˜ä½“ã‚’å›å¾©ï¼ˆHP+150ï¼‰" },
  { name: "ã‚¬ãƒ¼ãƒ‰ãƒ–ãƒ¼ã‚¹ãƒˆ", category: "support", desc: "å‘³æ–¹å…¨ä½“ã®é˜²å¾¡åŠ›ã‚¢ãƒƒãƒ—" },
  { name: "ã‚½ã‚¦ãƒ«ãƒãƒ¼ã‚¹ãƒˆ", category: "special", desc: "å…¨ä½“æ”»æ’ƒï¼‹è‡ªå·±å¼·åŒ–" }
];

let selectedSkills = JSON.parse(localStorage.getItem("selected_skills")) || [];
let favorites = JSON.parse(localStorage.getItem("fav_skills")) || [];

function renderSkills(list = skills) {
  const container = document.getElementById("skill-list");
  container.innerHTML = "";
  list.forEach(skill => {
    const div = document.createElement("div");
    div.className = "skill-item";
    const favMark = favorites.includes(skill.name) ? "â­" : "â˜†";
    div.innerHTML = `
      <span>${skill.name} (${skill.category})</span>
      <span>${skill.desc}</span>
      <span class="favorite" onclick="toggleFavorite('${skill.name}')">${favMark}</span>
      <button onclick="addSkill('${skill.name}')">è¿½åŠ </button>
    `;
    container.appendChild(div);
  });
}

function filterSkills() {
  const cat = document.getElementById("category").value;
  const query = document.getElementById("search").value.trim();
  const filtered = skills.filter(s => 
    (cat === "all" || s.category === cat) &&
    s.name.includes(query)
  );
  renderSkills(filtered);
}

function addSkill(name) {
  if (selectedSkills.length >= 16) return alert("æœ€å¤§16ã‚¹ã‚­ãƒ«ã¾ã§ã§ã™ï¼");
  if (selectedSkills.includes(name)) return alert("ã™ã§ã«ç™»éŒ²æ¸ˆã¿ã§ã™ï¼");
  selectedSkills.push(name);
  localStorage.setItem("selected_skills", JSON.stringify(selectedSkills));
  renderSelected();
}

function renderSelected() {
  const box = document.getElementById("selected-skills");
  box.innerHTML = "";
  selectedSkills.forEach((s, i) => {
    const div = document.createElement("div");
    div.className = "slot";
    div.innerHTML = `${i+1}. ${s} <button onclick="removeSkill(${i})">å‰Šé™¤</button>`;
    box.appendChild(div);
  });
}

function removeSkill(i) {
  selectedSkills.splice(i, 1);
  localStorage.setItem("selected_skills", JSON.stringify(selectedSkills));
  renderSelected();
}

function toggleFavorite(name) {
  const i = favorites.indexOf(name);
  if (i === -1) favorites.push(name); else favorites.splice(i, 1);
  localStorage.setItem("fav_skills", JSON.stringify(favorites));
  filterSkills();
}

renderSkills();
renderSelected();
</script>
</body>
</html>
