<h2>セリフ設定</h2>
<div id="voice-settings"></div>
<button id="saveVoiceBtn">保存</button>

<script type="module">
import Characters from '../js/characters.js';
import SkillSet from '../js/skills.js';

const container = document.getElementById("voice-settings");

// キャラごとに入力欄を生成
Characters.forEach(char => {
  const section = document.createElement("div");
  section.innerHTML = `<h3>${char.name}</h3>`;

  char.skills.forEach(skillId => {
    const skill = SkillSet.find(s => s.id === skillId);
    const input = document.createElement("input");
    input.type = "text";
    input.placeholder = `${skill.name} のセリフ`;
    input.value = char.voice?.[skillId] || "";
    input.dataset.charId = char.id;
    input.dataset.skillId = skillId;
    section.appendChild(input);
    section.appendChild(document.createElement("br"));
  });

  container.appendChild(section);
});

// 保存ボタン
document.getElementById("saveVoiceBtn").onclick = () => {
  const inputs = document.querySelectorAll("input[data-char-id]");
  const voiceSettings = {};

  inputs.forEach(input => {
    const c = input.dataset.charId;
    const s = input.dataset.skillId;
    if (!voiceSettings[c]) voiceSettings[c] = {};
    voiceSettings[c][s] = input.value;
  });

  localStorage.setItem("voiceSettings", JSON.stringify(voiceSettings));
  alert("セリフ設定を保存しました！");
};
</script>
