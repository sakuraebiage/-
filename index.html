<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>トップ画面</title>
<style>
body{font-family:monospace; background:#000; color:#e0e0e0;}
.char-card{border:1px solid #8ae1ff; margin:10px; padding:10px; border-radius:8px;}
.char-links button{margin:3px; padding:5px; background:#111; color:#8ae1ff; border:1px solid #8ae1ff; cursor:pointer;}
.char-links button:hover{background:#8ae1ff;color:#000;}
</style>
</head>
<body>
<h2>トップ画面</h2>
<div id="charList"></div>

<script>
const params=new URLSearchParams(window.location.search);
const selectedID=params.get("id");

let chars=JSON.parse(localStorage.getItem("chars")||"[]");
const container=document.getElementById("charList");

// 表示するのは登録キャラだけ
chars.forEach(c=>{
  if(selectedID && c.id!==selectedID) return;
  const div=document.createElement("div");
  div.className="char-card";
  div.innerHTML=`
    <strong>${c.name}</strong> (ID: ${c.id})<br>
    直近行動: ${c.lastAction||"なし"}<br>
    直近発言: ${c.lastMessage||"なし"}<br>
    <div class="char-links">
      <button onclick="goDefense('${c.id}')">防衛画面</button>
      <button onclick="goExplore('${c.id}')">探索画面</button>
      <button onclick="goMyPage('${c.id}')">マイページ</button>
    </div>
  `;
  container.appendChild(div);
});

function goDefense(id){ window.location.href="defense.html?id="+encodeURIComponent(id); }
function goExplore(id){ window.location.href="explore.html?id="+encodeURIComponent(id); }
function goMyPage(id){ window.location.href="mypage.html?id="+encodeURIComponent(id); }
</script>
</body>
</html>
