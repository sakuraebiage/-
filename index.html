<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æ˜Ÿå®ˆæˆ¦ç·š - ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</title>
<style>
body {
  margin: 0;
  font-family: "Consolas", "Roboto Mono", monospace;
  background: #000;
  color: #e0e0e0;
  display: flex;
  flex-direction: column;
  align-items: center;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background: #111;
  border-bottom: 1px solid #444;
  width: 100%;
}
header h1 { font-size: 1.3em; color: #8ae1ff; }
nav a {
  color: #8ae1ff;
  margin-left: 12px;
  text-decoration: none;
  transition: 0.3s;
}
nav a:hover { color: #fff; text-shadow: 0 0 5px #00eaff; }

#character-list {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  padding: 20px;
  width: 90%;
}

.character-card {
  background: #111;
  border: 1px solid #555;
  border-radius: 10px;
  padding: 10px;
  width: 200px;
  text-align: center;
  transition: transform 0.3s;
}
.character-card:hover {
  transform: scale(1.05);
  border-color: #8ae1ff;
}
.character-card img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #8ae1ff;
}
.character-name {
  font-weight: bold;
  color: #8ae1ff;
  margin-top: 8px;
}
.character-comment {
  font-size: 0.85em;
  color: #bbb;
  margin-top: 4px;
}

#newCharForm {
  margin: 20px 0;
}
#newCharForm input {
  padding: 5px;
  font-size: 1em;
}
#newCharForm button {
  padding: 5px 10px;
  margin-left: 5px;
  cursor: pointer;
  background: #111;
  color: #8ae1ff;
  border: 1px solid #8ae1ff;
}
#newCharForm button:hover {
  background: #8ae1ff;
  color: #000;
}

#charList div {
  margin-bottom: 8px;
}
#charList img {
  vertical-align: middle;
  border-radius: 50%;
  margin: 0 5px;
}
</style>
</head>
<body>

<header>
  <h1>æ˜Ÿå®ˆæˆ¦ç·š ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</h1>
<nav>
  <a href="../index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
  <a href="../defense/defense.html">ğŸ›¡ï¸ é˜²è¡›</a>
  <a href="../craft/craft.html">âš’ï¸ ã‚¯ãƒ©ãƒ•ãƒˆ</a>
  <a href="../items/items.html">ğŸ’ ã‚¢ã‚¤ãƒ†ãƒ </a>
  <a href="../chat/chat.html">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ</a>
  <a href="../mypage.html">ğŸ’ª è¨“ç·´</a>
  <a href="../battle_setup.html">âš” æˆ¦é—˜è¨­å®š</a>
  <a href="../shop.html">ğŸª è³¼è²·</a>
  <a href="../logout.html">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
</nav>


<h2>ç™»éŒ²ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è¦§</h2>
<div id="character-list"></div>

<h2>ã‚­ãƒ£ãƒ©ç®¡ç†</h2>
<!-- æ–°è¦ã‚­ãƒ£ãƒ©ä½œæˆãƒ•ã‚©ãƒ¼ãƒ  -->
<div id="newCharForm">
  <input type="text" id="newCharName" placeholder="ã‚­ãƒ£ãƒ©å">
  <button onclick="addNewChar()">è¿½åŠ </button>
</div>

<!-- ç™»éŒ²æ¸ˆã¿ã‚­ãƒ£ãƒ©ä¸€è¦§ -->
<div id="charList"></div>

<script>
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—
let userData = JSON.parse(localStorage.getItem("user_chars")) || { chars:[], selectedCharIndex:0 };

// ã‚­ãƒ£ãƒ©ä¸€è¦§æç”»
function renderCharList() {
  const list = document.getElementById("charList");
  list.innerHTML = "";
  userData.chars.forEach((char, i) => {
    const div = document.createElement("div");
    const selectedMark = userData.selectedCharIndex===i ? "ğŸŒŸ" : "";
    div.innerHTML = `
      ${selectedMark} <strong>${char.name}</strong>
      <img src="${char.icon||'https://placehold.co/32x32?text=No+Icon'}" width="32" height="32">
      <button onclick="selectChar(${i})">åˆ‡æ›¿</button>
    `;
    list.appendChild(div);
  });
}

// æ–°è¦ã‚­ãƒ£ãƒ©è¿½åŠ 
function addNewChar() {
  const name = document.getElementById("newCharName").value.trim();
  if(!name) return alert("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
  const newChar = { name, icon:"", stats:{}, skills:[], points:0 };
  userData.chars.push(newChar);
  userData.selectedCharIndex = userData.chars.length-1;
  localStorage.setItem("user_chars", JSON.stringify(userData));
  renderCharList();
  document.getElementById("newCharName").value="";
  renderCharacterCards();
}

// ã‚­ãƒ£ãƒ©åˆ‡æ›¿
function selectChar(index){
  userData.selectedCharIndex=index;
  localStorage.setItem("user_chars", JSON.stringify(userData));
  renderCharList();
  currentChar = userData.chars[index];
  updateAllPages?.();
}

// ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ç”¨ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚«ãƒ¼ãƒ‰æç”»
function renderCharacterCards() {
  const list = document.getElementById("character-list");
  list.innerHTML = "";
  if(userData.chars.length === 0){
    list.innerHTML = "<p>ã¾ã ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>";
    return;
  }
  userData.chars.forEach(c => {
    const card = document.createElement("div");
    card.classList.add("character-card");

    const img = document.createElement("img");
    img.src = c.icon || "https://placehold.co/120x120?text=No+Icon";

    const name = document.createElement("div");
    name.classList.add("character-name");
    name.textContent = c.name;

    const comment = document.createElement("div");
    comment.classList.add("character-comment");
    comment.textContent = c.comment || "ä¸€è¨€ã‚³ãƒ¡ãƒ³ãƒˆãªã—";

    card.appendChild(img);
    card.appendChild(name);
    card.appendChild(comment);

    card.addEventListener("click", () => {
      // ãƒã‚¤ãƒšãƒ¼ã‚¸ã«é£›ã°ã™å ´åˆ
      window.location.href = "mypage.html?name=" + encodeURIComponent(c.name);
    });

    list.appendChild(card);
  });
}

// åˆæœŸæç”»
renderCharList();
renderCharacterCards();
</script>

</body>
</html>
