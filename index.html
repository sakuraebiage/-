<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æ˜Ÿå®ˆæˆ¦ç·š - ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</title>
<style>
body {
  margin: 0;
  font-family: "Consolas", "Roboto Mono", monospace;
  background: #000;
  color: #e0e0e0;
  display: flex;
  flex-direction: column;
  align-items: center;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background: #111;
  border-bottom: 1px solid #444;
  width: 100%;
}
header h1 { font-size: 1.3em; color: #8ae1ff; }
nav a {
  color: #8ae1ff;
  margin-left: 12px;
  text-decoration: none;
  transition: 0.3s;
}
nav a:hover { color: #fff; text-shadow: 0 0 5px #00eaff; }

#character-list {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  padding: 20px;
  width: 90%;
}

.character-card {
  background: #111;
  border: 1px solid #555;
  border-radius: 10px;
  padding: 10px;
  width: 200px;
  text-align: center;
  transition: transform 0.3s;
}
.character-card:hover {
  transform: scale(1.05);
  border-color: #8ae1ff;
}
.character-card img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #8ae1ff;
}
.character-name {
  font-weight: bold;
  color: #8ae1ff;
  margin-top: 8px;
}
.character-comment {
  font-size: 0.85em;
  color: #bbb;
  margin-top: 4px;
}
</style>
</head>

<body>
<header>
  <h1>æ˜Ÿå®ˆæˆ¦ç·š ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</h1>
  <nav>
    <a href="index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
    <a href="defense/defense.html">ğŸ›¡ï¸ é˜²è¡›</a>
    <a href="craft/craft.html">âš’ï¸ ã‚¯ãƒ©ãƒ•ãƒˆ</a>
    <a href="items/items.html">ğŸ’ ã‚¢ã‚¤ãƒ†ãƒ </a>
    <a href="chat/chat.html">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ</a>
    <a href="mypage.html">ğŸ’ªã€€è¨“ç·´</a>
    <a href="battle_setup.html">âš” æˆ¦é—˜è¨­å®š</a>
  ã€€<a href="shop.html">ğŸª è³¼è²·</a>
  ã€€<a href="craft.html">âš’ ã‚¯ãƒ©ãƒ•ãƒˆ</a>
  ã€€<a href="mypage.html">ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
    <a href="logout.html">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
  </nav>
</header>

<h2>ç™»éŒ²ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è¦§</h2>
<div id="character-list"></div>

<h2>ã‚­ãƒ£ãƒ©ç®¡ç†</h2>

 <script> 
<!-- æ–°è¦ã‚­ãƒ£ãƒ©ä½œæˆ -->
<div id="newCharForm">
  <input type="text" id="newCharName" placeholder="ã‚­ãƒ£ãƒ©å">
  <button onclick="addNewChar()">è¿½åŠ </button>
</div>

<!-- ç™»éŒ²æ¸ˆã¿ã‚­ãƒ£ãƒ©ä¸€è¦§ -->
<div id="charList"></div>
let userData = JSON.parse(localStorage.getItem("user_chars")) || { chars:[], selectedCharIndex:0 };

function renderCharList() {
  const list = document.getElementById("charList");
  list.innerHTML = "";
  userData.chars.forEach((char, i) => {
    const div = document.createElement("div");
    div.style.marginBottom="8px";
    const selectedMark = userData.selectedCharIndex===i ? "ğŸŒŸ" : "";
    div.innerHTML = `
      ${selectedMark} <strong>${char.name}</strong>
      <img src="${char.icon||'default_icon.png'}" width="32" height="32">
      <button onclick="selectChar(${i})">åˆ‡æ›¿</button>
    `;
    list.appendChild(div);
  });
}

function addNewChar() {
  const name = document.getElementById("newCharName").value.trim();
  if(!name) return alert("åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
  const newChar = { name, icon:"", stats:{}, skills:[], points:0 };
  userData.chars.push(newChar);
  userData.selectedCharIndex = userData.chars.length-1; // è¿½åŠ ã—ãŸã‚­ãƒ£ãƒ©ã‚’å³é¸æŠ
  localStorage.setItem("user_chars", JSON.stringify(userData));
  renderCharList();
  document.getElementById("newCharName").value="";
}

// ã‚­ãƒ£ãƒ©åˆ‡æ›¿
function selectChar(index){
  userData.selectedCharIndex=index;
  localStorage.setItem("user_chars", JSON.stringify(userData));
  renderCharList();
  // å„ãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºã‚’æ›´æ–°
  currentChar = userData.chars[index];
  updateAllPages(); 
}

renderCharList();

<script>
// ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆå¾Œã§ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨é€£æºå¯èƒ½ï¼‰
const characters = JSON.parse(localStorage.getItem("characters") || "[]");

const list = document.getElementById("character-list");
if (characters.length === 0) {
  list.innerHTML = "<p>ã¾ã ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>";
} else {
  characters.forEach(c => {
    const card = document.createElement("div");
    card.classList.add("character-card");

    const img = document.createElement("img");
    img.src = c.iconUrl || "https://placehold.co/120x120?text=No+Icon";

    const name = document.createElement("div");
    name.classList.add("character-name");
    name.textContent = c.name;

    const comment = document.createElement("div");
    comment.classList.add("character-comment");
    comment.textContent = c.comment || "ä¸€è¨€ã‚³ãƒ¡ãƒ³ãƒˆãªã—";

    card.appendChild(img);
    card.appendChild(name);
    card.appendChild(comment);
    card.addEventListener("click", () => {
      window.location.href = "mypage.html?name=" + encodeURIComponent(c.name);
    });
    list.appendChild(card);
  });
}
</script>
</body>
</html>
