<h2>マイページ</h2>
<label>名前: <input type="text" id="nameInput"></label><br>
<label>プロフィール: <input type="text" id="profileInput"></label><br>
<div id="iconInputs"></div>
<button id="addIconBtn">アイコン追加</button>
<button id="saveBtn">保存</button>

<script>
const currentCharName = localStorage.getItem("currentChar");
const allChars = JSON.parse(localStorage.getItem("characters")||"[]");
const currentChar = allChars.find(c=>c.name===currentCharName);

const iconInputsDiv = document.getElementById("iconInputs");

function renderIconInputs(){
  iconInputsDiv.innerHTML="";
  for(let i=0;i<10;i++){
    const val = currentChar.iconUrls[i]||"";
    iconInputsDiv.innerHTML += `<input type="text" placeholder="アイコンURL" value="${val}"><br>`;
  }
}
renderIconInputs();

document.getElementById("saveBtn").onclick=()=>{
  currentChar.name = document.getElementById("nameInput").value;
  currentChar.profile = document.getElementById("profileInput").value;
  currentChar.iconUrls=[];
  const inputs = iconInputsDiv.querySelectorAll("input");
  inputs.forEach(inp=>{ if(inp.value) currentChar.iconUrls.push(inp.value); });
  localStorage.setItem("characters",JSON.stringify(allChars));
  alert("保存しました");
};
</script>
