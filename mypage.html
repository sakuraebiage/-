<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒã‚¤ãƒšãƒ¼ã‚¸ - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç·¨é›†</title>
<style>
body {
  margin:0;
  font-family:"Consolas","Roboto Mono",monospace;
  background:#000;
  color:#e0e0e0;
  display:flex;
  flex-direction:column;
}
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 20px;
  background:#111;
  border-bottom:1px solid #444;
}
header h1 { font-size:1.2em; color:#8ae1ff; }
nav a { color:#8ae1ff; margin-left:12px; text-decoration:none; transition:0.3s; }
nav a:hover { color:#fff; text-shadow:0 0 5px #00eaff; }

main { padding:20px; flex:1; overflow-y:auto; }
h2 { color:#8ae1ff; }
label { display:block; margin:8px 0 4px; }
input[type=text], textarea { width:100%; padding:6px; background:#222; border:1px solid #555; color:#e0e0e0; border-radius:4px; }
textarea { resize:vertical; }

.url-group { display:flex; align-items:center; margin-bottom:4px; }
.url-group input { flex:1; }
.url-group button { margin-left:4px; padding:4px 8px; background:#111; border:1px solid #8ae1ff; color:#8ae1ff; cursor:pointer; }
.url-group button:hover { background:#8ae1ff; color:#000; }

button.save-btn { margin-top:12px; padding:8px 12px; background:#111; border:1px solid #8ae1ff; color:#8ae1ff; cursor:pointer; }
button.save-btn:hover { background:#8ae1ff; color:#000; }

#icon-preview, #sprite-preview { display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }
#icon-preview img, #sprite-preview img { width:60px; height:60px; object-fit:cover; border:1px solid #555; border-radius:4px; }
</style>
</head>
<body>
<header>
  <h1>ãƒã‚¤ãƒšãƒ¼ã‚¸ - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç·¨é›†</h1>
  <nav>
    <a href="index.html">ğŸ  ãƒˆãƒƒãƒ—</a>
    <a href="defense.html">ğŸ›¡ é˜²è¡›</a>
    <a href="craft.html">âš’ ã‚¯ãƒ©ãƒ•ãƒˆ</a>
    <a href="items.html">ğŸ’ ã‚¢ã‚¤ãƒ†ãƒ </a>
  </nav>
</header>

<main>
  <h2>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±</h2>
  <label>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å</label>
  <input type="text" id="charName">

  <label>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ–‡</label>
  <textarea id="charProfile" rows="3"></textarea>

  <label>ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã™ã‚‹ä¸€è¨€</label>
  <input type="text" id="charTagline">

  <h2>ã‚¢ã‚¤ã‚³ãƒ³URLï¼ˆåˆæœŸ10æ ï¼‰</h2>
  <div id="icon-container"></div>
  <button id="add-icon">â• ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ </button>
  <div id="icon-preview"></div>

  <h2>ç«‹ã¡çµµURLï¼ˆåˆæœŸ10æ ï¼‰</h2>
  <div id="sprite-container"></div>
  <button id="add-sprite">â• ç«‹ã¡çµµè¿½åŠ </button>
  <div id="sprite-preview"></div>

  <button class="save-btn" id="saveBtn">ğŸ’¾ ä¿å­˜</button>
</main>

<script>
const MAX_INITIAL = 10;

// åˆæœŸãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
let charData = JSON.parse(localStorage.getItem("currentChar")) || {
  name:"",
  profile:"",
  tagline:"",
  icons:Array(MAX_INITIAL).fill(""),
  sprites:Array(MAX_INITIAL).fill("")
};

const charName = document.getElementById("charName");
const charProfile = document.getElementById("charProfile");
const charTagline = document.getElementById("charTagline");
const iconContainer = document.getElementById("icon-container");
const spriteContainer = document.getElementById("sprite-container");
const iconPreview = document.getElementById("icon-preview");
const spritePreview = document.getElementById("sprite-preview");

function createInput(container, array, type){
  container.innerHTML="";
  array.forEach((val,i)=>{
    const group = document.createElement("div");
    group.className="url-group";
    const input = document.createElement("input");
    input.type="text";
    input.value = val;
    input.placeholder = type==="icon"?"ã‚¢ã‚¤ã‚³ãƒ³URL":"ç«‹ã¡çµµURL";
    input.oninput = ()=>{ array[i] = input.value; updatePreview(type); };
    const delBtn = document.createElement("button");
    delBtn.textContent="âŒ";
    delBtn.onclick = ()=>{ array[i] = ""; input.value=""; updatePreview(type); };
    group.appendChild(input);
    group.appendChild(delBtn);
    container.appendChild(group);
  });
  updatePreview(type);
}

function updatePreview(type){
  const preview = type==="icon"?iconPreview:spritePreview;
  const arr = type==="icon"?charData.icons:charData.sprites;
  preview.innerHTML="";
  arr.forEach(url=>{
    if(url.trim()!==""){
      const img = document.createElement("img");
      img.src=url;
      preview.appendChild(img);
    }
  });
}

// åˆæœŸ10æ ç”Ÿæˆ
createInput(iconContainer,charData.icons,"icon");
createInput(spriteContainer,charData.sprites,"sprite");

// è¿½åŠ ãƒœã‚¿ãƒ³
document.getElementById("add-icon").onclick = ()=>{
  charData.icons.push("");
  createInput(iconContainer,charData.icons,"icon");
};
document.getElementById("add-sprite").onclick = ()=>{
  charData.sprites.push("");
  createInput(spriteContainer,charData.sprites,"sprite");
};

// ãƒ•ã‚©ãƒ¼ãƒ åæ˜ 
charName.value = charData.name;
charProfile.value = charData.profile;
charTagline.value = charData.tagline;

// ä¿å­˜ãƒœã‚¿ãƒ³
document.getElementById("saveBtn").onclick = ()=>{
  charData.name = charName.value;
  charData.profile = charProfile.value;
  charData.tagline = charTagline.value;
  localStorage.setItem("currentChar",JSON.stringify(charData));
  alert("ä¿å­˜ã—ã¾ã—ãŸï¼");
};
</script>
</body>
</html>
